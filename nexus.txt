Nexus Repository Manager
Это инструмент для управления зависимостей. 
Он позволяет хранить и управлять JAR, WAR, Docker-образы и т.д.


Установка:
    sudo apt update
    sudo wget https://download.sonatype.com/nexus/3/latest-unix.tar.gz
    sudo tar -zxvf latest-unix.tar.gz -C /opt
    sudo mv opt/nexus-3.61.0-02/ opt/nexus/
    
    # user + config
    sudo adduser nexus
    sudo chown -R nexus:nexus nexus/ sonatype-work/
    sudo vim /opt/nexus/bin/nexus.rc
        run_as_user="nexus"

    # service
    sudo vim /etc/systemd/system/nexus.service
        [Unit]
        Description=nexus service
        After=network.target
        [Service]
        Type=forking
        LimitNOFILE=65536
        ExecStart=/opt/nexus/bin/nexus start
        ExecStop=/opt/nexus/bin/nexus stop
        User=nexus
        Restart=on-abort
        [Install]
        WantedBy=multi-user.target
    sudo systemctl start nexus
    sudo systemctl enable nexus
    systemctl status nexus

    # logs
    tail -f /opt/sonatype-work/nexus3/log/nexus.log
    
Настройка
    Заходим на веб-морду
    http://127.0.0.1:8081/ - слушает 8081 порт, заменить на ip
                             если коннектимся из вне
    cat /opt/sonatype-work/nexus3/admin.password    # копируем pass
    Жмем sing in
        login: admin
        password: /opt/sonatype-work/nexus3/admin.password

https:
    cd /opt/nexus/etc/ssl/
    sudo keytool -genkeypair -keystore keystore.jks -storepass my_pass                    <----+
                 -keypass my_pass -alias jetty -keyalg RSA -keysize 2048 -validity 1000         \
                 -dname "CN=*.${NEXUS_DOMAIN}, OU=test, O=test1, L=Unspecified, ST=Unspecified, C=RU" 
                 -ext "SAN=DNS:nexus-repo.com,IP:192.168.1.66" -ext "BC=ca:true"                  \
    sudo keytool -export -alias jetty -keystore keystore.jks -rfc -file nexus.cert                 \
    sudo vim /opt/nexus/etc/nexus-default.properties                                                \
        дописываем в секцию # Jetty section                                                          |
        application-port-ssl=8443                                                                    |
        nexus-args=${jetty.etc}/jetty.xml,${jetty.etc}/jetty-http.xml,${jetty.etc}/jetty-https.xml,${jetty.etc}/jetty-requestlog.xml
    sudo vim /opt/nexus/etc/jetty/jetty-https.xml                                                    |
        Находим блок sslContextFactory вставляем свои пароли и имя keystore который генерили раньше -+
        <Set name="KeyStorePath"><Property name="ssl.etc"/>/keystore.jks</Set>
        <Set name="KeyStorePassword">my_pass</Set>
        <Set name="KeyManagerPassword">my_pass</Set>
        <Set name="TrustStorePath"><Property name="ssl.etc"/>/keystore.jks</Set>
        <Set name="TrustStorePassword">my_pass</Set>
    sudo systemctl restart nexus
    
    # установка сертификата
    sudo mv nexus.cert nexus.crt
    sudo cp nexus.crt  /usr/local/share/ca-certificates
    sudo update-ca-certificates

    Заходим на веб-морду под админом
    Server administration and configuration
    и задаем https (пока только в докере)


Добавить maven репозиторий в nexus
    pom.xml
    <distributionManagement>
		<repository>
			<id>nexus-repo</id>
			<url>http://192.168.1.66:8081/repository/dto/</url>
		</repository>
	</distributionManagement>

    mvn clean deploy
